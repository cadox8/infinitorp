"use strict";(()=>{var f=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var q=(o,e,t)=>e in o?f(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var _=(o,e,t,i)=>{for(var r=i>1?void 0:i?C(e,t):e,u=o.length-1,p;u>=0;u--)(p=o[u])&&(r=(i?p(e,t,r):p(r))||r);return i&&r&&f(e,t,r),r};var s=(o,e,t)=>(q(o,typeof e!="symbol"?e+"":e,t),t);var y=(r=>(r.req_open="mdt_request_open",r.mdt_s_c="mdt_s_c",r.mdt_show="mdt_ui_show",r.mdt_close="mdt_ui_close",r))(y||{}),l=y;var m=class{static RegisterApiHandler(e){return(t,i,r)=>{m.api_handlers[e]=r.value}}static emit(e,t){console.log(`[MDT] Emitting event ${e} with args: ${t}`),SendNUIMessage(JSON.stringify({type:"mdt_event",event:e,data:t}))}},n=m;s(n,"api_handlers",{});RegisterNuiCallbackType("api_request_s");on("__cfx_nui:api_request_s",(o,e)=>{let t=o.request,i=o.params;console.log(`[UiController] Handling request_S "${t}" with params: ${JSON.stringify(i)}`),TriggerServerEvent(t,i)});RegisterNuiCallbackType("api_request");on("__cfx_nui:api_request",(o,e)=>{let t=o.request,i=o.params;console.log(`[UiController] Handling request "${t}" with params: ${JSON.stringify(i)}`),n.api_handlers[t]&&n.api_handlers[t](i,e)});onNet(l.mdt_s_c,(o,e)=>{console.log("Received event from server: "+o),n.emit(o,e)});var c=null;function d(){try{return c||(c=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"config.json")),c)}catch(o){console.log("Failed to load config.json")}return{}}var a=class{constructor(e){s(this,"qbcore");s(this,"config");console.log("MDT Loaded"),this.qbcore=e,this.config=d(),RegisterCommand("mdt",()=>{this.open()},!1),this.config.client.keybind!==""&&RegisterKeyMapping("mdt","Open MDT","keyboard",this.config.client.keybind)}open(){let e=this.qbcore.Functions.GetPlayerData();!e.metadata.isDead&&!e.metadata.inlaststand&&!e.metadata.ishandcuffed&&!IsPauseMenuActive()&&(console.log("Opening MDT"),emitNet(l.req_open),SetNuiFocus(!0,!0))}close(){SetNuiFocus(!1,!1)}};_([n.RegisterApiHandler(l.mdt_close)],a.prototype,"close",1);var h=[a];var g=class{constructor(){s(this,"modules");s(this,"qbcore");this.qbcore=global.exports["qb-core"].GetCoreObject(),this.modules=h.map(e=>new e(this.qbcore))}getModule(e){return this.modules.find(t=>t.constructor.name===e)}},H=new g;})();
